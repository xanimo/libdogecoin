<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdogecoin: src/libevent/evbuffer-internal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libdogecoin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_97979c17d049e8002d2e089c4964ead4.html">libevent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">evbuffer-internal.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;event2/event-config.h&quot;</code><br />
<code>#include &quot;evconfig-private.h&quot;</code><br />
<code>#include &quot;event2/util.h&quot;</code><br />
<code>#include &quot;event2/event_struct.h&quot;</code><br />
<code>#include &quot;<a class="el" href="util-internal_8h_source.html">util-internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="defer-internal_8h_source.html">defer-internal.h</a>&quot;</code><br />
<code>#include &lt;sys/queue.h&gt;</code><br />
</div>
<p><a href="evbuffer-internal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__cb__entry.html">evbuffer_cb_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer.html">evbuffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__chain.html">evbuffer_chain</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__chain__reference.html">evbuffer_chain_reference</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__chain__file__segment.html">evbuffer_chain_file_segment</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__file__segment.html">evbuffer_file_segment</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevbuffer__multicast__parent.html">evbuffer_multicast_parent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a88a728a0e2acbfc11e4430c9fce15eab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a88a728a0e2acbfc11e4430c9fce15eab">EVBUFFER_CB_NODEFER</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a88a728a0e2acbfc11e4430c9fce15eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01464ed9cb0292540d7e0fb3d16d3844"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a01464ed9cb0292540d7e0fb3d16d3844">MIN_BUFFER_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a01464ed9cb0292540d7e0fb3d16d3844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc2d164d40c2e7fba6014619f968b16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a6fc2d164d40c2e7fba6014619f968b16">EVBUFFER_CHAIN_MAX</a>&#160;&#160;&#160;((size_t)EV_SSIZE_MAX)</td></tr>
<tr class="separator:a6fc2d164d40c2e7fba6014619f968b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e49580e8b5047ba90eeba99631e9b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a20e49580e8b5047ba90eeba99631e9b1">EVBUFFER_FILESEGMENT</a>&#160;&#160;&#160;0x0001</td></tr>
<tr class="separator:a20e49580e8b5047ba90eeba99631e9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16ec197b2b0ede3e2e6de9e9ccb430b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#af16ec197b2b0ede3e2e6de9e9ccb430b">EVBUFFER_SENDFILE</a>&#160;&#160;&#160;0x0002</td></tr>
<tr class="separator:af16ec197b2b0ede3e2e6de9e9ccb430b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d108b84d3fb3a5f0c5c1d2f9c3cb920"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a7d108b84d3fb3a5f0c5c1d2f9c3cb920">EVBUFFER_REFERENCE</a>&#160;&#160;&#160;0x0004</td></tr>
<tr class="separator:a7d108b84d3fb3a5f0c5c1d2f9c3cb920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93af71b521a359f90fce52d1cf9f49c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a93af71b521a359f90fce52d1cf9f49c5">EVBUFFER_IMMUTABLE</a>&#160;&#160;&#160;0x0008</td></tr>
<tr class="separator:a93af71b521a359f90fce52d1cf9f49c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f97541f1b57f6ab70af2c555749161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a07f97541f1b57f6ab70af2c555749161">EVBUFFER_MEM_PINNED_R</a>&#160;&#160;&#160;0x0010</td></tr>
<tr class="separator:a07f97541f1b57f6ab70af2c555749161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6334db161ef939ed7ffff0f1f1c7b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a3d6334db161ef939ed7ffff0f1f1c7b5">EVBUFFER_MEM_PINNED_W</a>&#160;&#160;&#160;0x0020</td></tr>
<tr class="separator:a3d6334db161ef939ed7ffff0f1f1c7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ddf04d9ba9e2d6f56c67250acdf6e8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a2ddf04d9ba9e2d6f56c67250acdf6e8e">EVBUFFER_MEM_PINNED_ANY</a>&#160;&#160;&#160;(<a class="el" href="evbuffer-internal_8h.html#a07f97541f1b57f6ab70af2c555749161">EVBUFFER_MEM_PINNED_R</a>|<a class="el" href="evbuffer-internal_8h.html#a3d6334db161ef939ed7ffff0f1f1c7b5">EVBUFFER_MEM_PINNED_W</a>)</td></tr>
<tr class="separator:a2ddf04d9ba9e2d6f56c67250acdf6e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab79fb1d80416f15da34e29d7acd3da00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ab79fb1d80416f15da34e29d7acd3da00">EVBUFFER_DANGLING</a>&#160;&#160;&#160;0x0040</td></tr>
<tr class="separator:ab79fb1d80416f15da34e29d7acd3da00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff250d93bc4ed3bf372587b8f528e930"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#aff250d93bc4ed3bf372587b8f528e930">EVBUFFER_MULTICAST</a>&#160;&#160;&#160;0x0080</td></tr>
<tr class="separator:aff250d93bc4ed3bf372587b8f528e930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac495c63ebf0c5e35241d45528d4f359d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ac495c63ebf0c5e35241d45528d4f359d">EVBUFFER_CHAIN_SIZE</a>&#160;&#160;&#160;sizeof(struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a>)</td></tr>
<tr class="separator:ac495c63ebf0c5e35241d45528d4f359d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1307b3b5932a9d17776089a56f65ff99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a1307b3b5932a9d17776089a56f65ff99">EVBUFFER_CHAIN_EXTRA</a>(t,  c)&#160;&#160;&#160;(t *)((struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *)(c) + 1)</td></tr>
<tr class="separator:a1307b3b5932a9d17776089a56f65ff99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfee4993b153dd7fe271db7669e6d647"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#abfee4993b153dd7fe271db7669e6d647">ASSERT_EVBUFFER_LOCKED</a>(<a class="el" href="structbuffer.html">buffer</a>)&#160;&#160;&#160;	<a class="el" href="evthread-internal_8h.html#af1b6adfa1212ad399ea01675f784ec28">EVLOCK_ASSERT_LOCKED</a>((<a class="el" href="structbuffer.html">buffer</a>)-&gt;lock)</td></tr>
<tr class="separator:abfee4993b153dd7fe271db7669e6d647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db7168a100510b09c26d9d9896991e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a>(<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr class="separator:a2db7168a100510b09c26d9d9896991e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d4b06a7e3d8b4e945cd3234328e39d7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr class="separator:a7d4b06a7e3d8b4e945cd3234328e39d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eaca177b89c10b76bf6f8228aace3ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a9eaca177b89c10b76bf6f8228aace3ba">EVBUFFER_LOCK2</a>(buffer1,  buffer2)</td></tr>
<tr class="separator:a9eaca177b89c10b76bf6f8228aace3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c063b555017c0dfceede8560a711aed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a2c063b555017c0dfceede8560a711aed">EVBUFFER_UNLOCK2</a>(buffer1,  buffer2)</td></tr>
<tr class="separator:a2c063b555017c0dfceede8560a711aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d8385549fea2f6a752537b4679ba3d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a65d8385549fea2f6a752537b4679ba3d">WSABUF_FROM_EVBUFFER_IOV</a>(i,  ei)</td></tr>
<tr class="separator:a65d8385549fea2f6a752537b4679ba3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad3783a364396727141182101452bb831"><td class="memItemLeft" align="right" valign="top">typedef ev_off_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ad3783a364396727141182101452bb831">ev_misalign_t</a></td></tr>
<tr class="separator:ad3783a364396727141182101452bb831"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a28d71fa071cae93e6b7a64314283e921"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a28d71fa071cae93e6b7a64314283e921">evbuffer_incref_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buf)</td></tr>
<tr class="separator:a28d71fa071cae93e6b7a64314283e921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae58a14e3a6a2bc7e1ffc02b71d78daec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ae58a14e3a6a2bc7e1ffc02b71d78daec">evbuffer_incref_and_lock_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buf)</td></tr>
<tr class="separator:ae58a14e3a6a2bc7e1ffc02b71d78daec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0cf08c219c3f30a28929846277b90b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#afe0cf08c219c3f30a28929846277b90b">evbuffer_chain_pin_</a> (struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *chain, unsigned flag)</td></tr>
<tr class="separator:afe0cf08c219c3f30a28929846277b90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac949f855421b4afd676f3293b4d8706e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ac949f855421b4afd676f3293b4d8706e">evbuffer_chain_unpin_</a> (struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *chain, unsigned flag)</td></tr>
<tr class="separator:ac949f855421b4afd676f3293b4d8706e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac07b1be4b6fe0b2aa6a1677b060a80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a3ac07b1be4b6fe0b2aa6a1677b060a80">evbuffer_decref_and_unlock_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr class="separator:a3ac07b1be4b6fe0b2aa6a1677b060a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e70f6b044b684d5c4c94e385eba66e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#ae3e70f6b044b684d5c4c94e385eba66e">evbuffer_expand_fast_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *, size_t, int)</td></tr>
<tr class="separator:ae3e70f6b044b684d5c4c94e385eba66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664f1383f1d7d02842880672be9f6f80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a664f1383f1d7d02842880672be9f6f80">evbuffer_read_setup_vecs_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buf, ev_ssize_t howmuch, struct evbuffer_iovec *vecs, int n_vecs, struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> ***chainp, int exact)</td></tr>
<tr class="separator:a664f1383f1d7d02842880672be9f6f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dbc008d184dacd1d3d97ed9fabad435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a2dbc008d184dacd1d3d97ed9fabad435">evbuffer_set_parent_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buf, struct bufferevent *bev)</td></tr>
<tr class="separator:a2dbc008d184dacd1d3d97ed9fabad435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576702a87079ef74c75413ed83758825"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a576702a87079ef74c75413ed83758825">evbuffer_invoke_callbacks_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buf)</td></tr>
<tr class="separator:a576702a87079ef74c75413ed83758825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fba9707bdfca27ce64ab9b3af5bbf8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evbuffer-internal_8h.html#a44fba9707bdfca27ce64ab9b3af5bbf8">evbuffer_get_callbacks_</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *<a class="el" href="structbuffer.html">buffer</a>, struct event_callback **cbs, int max_cbs)</td></tr>
<tr class="separator:a44fba9707bdfca27ce64ab9b3af5bbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abfee4993b153dd7fe271db7669e6d647" name="abfee4993b153dd7fe271db7669e6d647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfee4993b153dd7fe271db7669e6d647">&#9670;&nbsp;</a></span>ASSERT_EVBUFFER_LOCKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT_EVBUFFER_LOCKED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structbuffer.html">buffer</a></td><td>)</td>
          <td>&#160;&#160;&#160;	<a class="el" href="evthread-internal_8h.html#af1b6adfa1212ad399ea01675f784ec28">EVLOCK_ASSERT_LOCKED</a>((<a class="el" href="structbuffer.html">buffer</a>)-&gt;lock)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Assert that we are holding the lock on an evbuffer </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00282">282</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a88a728a0e2acbfc11e4430c9fce15eab" name="a88a728a0e2acbfc11e4430c9fce15eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a728a0e2acbfc11e4430c9fce15eab">&#9670;&nbsp;</a></span>EVBUFFER_CB_NODEFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_CB_NODEFER&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00044">44</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a1307b3b5932a9d17776089a56f65ff99" name="a1307b3b5932a9d17776089a56f65ff99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1307b3b5932a9d17776089a56f65ff99">&#9670;&nbsp;</a></span>EVBUFFER_CHAIN_EXTRA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_CHAIN_EXTRA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(t *)((struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *)(c) + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return a pointer to extra data allocated along with an evbuffer. </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00279">279</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a6fc2d164d40c2e7fba6014619f968b16" name="a6fc2d164d40c2e7fba6014619f968b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc2d164d40c2e7fba6014619f968b16">&#9670;&nbsp;</a></span>EVBUFFER_CHAIN_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_CHAIN_MAX&#160;&#160;&#160;((size_t)EV_SSIZE_MAX)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00166">166</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="ac495c63ebf0c5e35241d45528d4f359d" name="ac495c63ebf0c5e35241d45528d4f359d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac495c63ebf0c5e35241d45528d4f359d">&#9670;&nbsp;</a></span>EVBUFFER_CHAIN_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_CHAIN_SIZE&#160;&#160;&#160;sizeof(struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00277">277</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="ab79fb1d80416f15da34e29d7acd3da00" name="ab79fb1d80416f15da34e29d7acd3da00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab79fb1d80416f15da34e29d7acd3da00">&#9670;&nbsp;</a></span>EVBUFFER_DANGLING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_DANGLING&#160;&#160;&#160;0x0040</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a chain that should be freed, but can't be freed until it is un-pinned. </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00200">200</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a20e49580e8b5047ba90eeba99631e9b1" name="a20e49580e8b5047ba90eeba99631e9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e49580e8b5047ba90eeba99631e9b1">&#9670;&nbsp;</a></span>EVBUFFER_FILESEGMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_FILESEGMENT&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >A chain used for a file segment </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00189">189</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a93af71b521a359f90fce52d1cf9f49c5" name="a93af71b521a359f90fce52d1cf9f49c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93af71b521a359f90fce52d1cf9f49c5">&#9670;&nbsp;</a></span>EVBUFFER_IMMUTABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_IMMUTABLE&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >read-only chain </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00192">192</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a2db7168a100510b09c26d9d9896991e0" name="a2db7168a100510b09c26d9d9896991e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db7168a100510b09c26d9d9896991e0">&#9670;&nbsp;</a></span>EVBUFFER_LOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_LOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structbuffer.html">buffer</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                \</div>
<div class="line">        EVLOCK_LOCK((<a class="code hl_struct" href="structbuffer.html">buffer</a>)-&gt;lock, 0);             \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="astructbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00037">buffer.h:37</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00285">285</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a9eaca177b89c10b76bf6f8228aace3ba" name="a9eaca177b89c10b76bf6f8228aace3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eaca177b89c10b76bf6f8228aace3ba">&#9670;&nbsp;</a></span>EVBUFFER_LOCK2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_LOCK2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buffer1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buffer2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                \</div>
<div class="line">        EVLOCK_LOCK2((buffer1)-&gt;lock, (buffer2)-&gt;lock, 0, 0);   \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00293">293</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a2ddf04d9ba9e2d6f56c67250acdf6e8e" name="a2ddf04d9ba9e2d6f56c67250acdf6e8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ddf04d9ba9e2d6f56c67250acdf6e8e">&#9670;&nbsp;</a></span>EVBUFFER_MEM_PINNED_ANY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_MEM_PINNED_ANY&#160;&#160;&#160;(<a class="el" href="evbuffer-internal_8h.html#a07f97541f1b57f6ab70af2c555749161">EVBUFFER_MEM_PINNED_R</a>|<a class="el" href="evbuffer-internal_8h.html#a3d6334db161ef939ed7ffff0f1f1c7b5">EVBUFFER_MEM_PINNED_W</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00197">197</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a07f97541f1b57f6ab70af2c555749161" name="a07f97541f1b57f6ab70af2c555749161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f97541f1b57f6ab70af2c555749161">&#9670;&nbsp;</a></span>EVBUFFER_MEM_PINNED_R</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_MEM_PINNED_R&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a chain that mustn't be reallocated or freed, or have its contents memmoved, until the chain is un-pinned. </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00195">195</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a3d6334db161ef939ed7ffff0f1f1c7b5" name="a3d6334db161ef939ed7ffff0f1f1c7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6334db161ef939ed7ffff0f1f1c7b5">&#9670;&nbsp;</a></span>EVBUFFER_MEM_PINNED_W</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_MEM_PINNED_W&#160;&#160;&#160;0x0020</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00196">196</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="aff250d93bc4ed3bf372587b8f528e930" name="aff250d93bc4ed3bf372587b8f528e930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff250d93bc4ed3bf372587b8f528e930">&#9670;&nbsp;</a></span>EVBUFFER_MULTICAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_MULTICAST&#160;&#160;&#160;0x0080</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a chain that is a referenced copy of another chain </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00202">202</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a7d108b84d3fb3a5f0c5c1d2f9c3cb920" name="a7d108b84d3fb3a5f0c5c1d2f9c3cb920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d108b84d3fb3a5f0c5c1d2f9c3cb920">&#9670;&nbsp;</a></span>EVBUFFER_REFERENCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_REFERENCE&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a chain with a mem reference </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00191">191</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="af16ec197b2b0ede3e2e6de9e9ccb430b" name="af16ec197b2b0ede3e2e6de9e9ccb430b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af16ec197b2b0ede3e2e6de9e9ccb430b">&#9670;&nbsp;</a></span>EVBUFFER_SENDFILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_SENDFILE&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >a chain used with sendfile </p>

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00190">190</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a7d4b06a7e3d8b4e945cd3234328e39d7" name="a7d4b06a7e3d8b4e945cd3234328e39d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d4b06a7e3d8b4e945cd3234328e39d7">&#9670;&nbsp;</a></span>EVBUFFER_UNLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_UNLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="structbuffer.html">buffer</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                \</div>
<div class="line">        EVLOCK_UNLOCK((<a class="code hl_struct" href="structbuffer.html">buffer</a>)-&gt;lock, 0);           \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00289">289</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a2c063b555017c0dfceede8560a711aed" name="a2c063b555017c0dfceede8560a711aed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c063b555017c0dfceede8560a711aed">&#9670;&nbsp;</a></span>EVBUFFER_UNLOCK2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVBUFFER_UNLOCK2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buffer1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buffer2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                \</div>
<div class="line">        EVLOCK_UNLOCK2((buffer1)-&gt;lock, (buffer2)-&gt;lock, 0, 0); \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00297">297</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a01464ed9cb0292540d7e0fb3d16d3844" name="a01464ed9cb0292540d7e0fb3d16d3844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01464ed9cb0292540d7e0fb3d16d3844">&#9670;&nbsp;</a></span>MIN_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_BUFFER_SIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00055">55</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<a id="a65d8385549fea2f6a752537b4679ba3d" name="a65d8385549fea2f6a752537b4679ba3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d8385549fea2f6a752537b4679ba3d">&#9670;&nbsp;</a></span>WSABUF_FROM_EVBUFFER_IOV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WSABUF_FROM_EVBUFFER_IOV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ei&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span> {        \</div>
<div class="line">        (i)-&gt;buf = (ei)-&gt;iov_base;      \</div>
<div class="line">        (i)-&gt;len = (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(ei)-&gt;iov_len;    \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00330">330</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ad3783a364396727141182101452bb831" name="ad3783a364396727141182101452bb831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3783a364396727141182101452bb831">&#9670;&nbsp;</a></span>ev_misalign_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef ev_off_t <a class="el" href="evbuffer-internal_8h.html#ad3783a364396727141182101452bb831">ev_misalign_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="evbuffer-internal_8h_source.html#l00162">162</a> of file <a class="el" href="evbuffer-internal_8h_source.html">evbuffer-internal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afe0cf08c219c3f30a28929846277b90b" name="afe0cf08c219c3f30a28929846277b90b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0cf08c219c3f30a28929846277b90b">&#9670;&nbsp;</a></span>evbuffer_chain_pin_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_chain_pin_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *&#160;</td>
          <td class="paramname"><em>chain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Pin a single buffer chain using a given flag. A pinned chunk may not be moved or freed until it is unpinned. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00340">340</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  341</span>{</div>
<div class="line"><span class="lineno">  342</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>((chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> &amp; flag) == 0);</div>
<div class="line"><span class="lineno">  343</span>    chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> |= flag;</div>
<div class="line"><span class="lineno">  344</span>}</div>
<div class="ttc" id="astructevbuffer__chain_html_a5f5fd17d81d5c58ccb4113857115130f"><div class="ttname"><a href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">evbuffer_chain::flags</a></div><div class="ttdeci">unsigned flags</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00188">evbuffer-internal.h:188</a></div></div>
<div class="ttc" id="autil-internal_8h_html_a7365930d8b30f4c1ab3cef31a8622731"><div class="ttname"><a href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a></div><div class="ttdeci">#define EVUTIL_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="util-internal_8h_source.html#l00363">util-internal.h:363</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="util-internal_8h_source.html#l00363">EVUTIL_ASSERT</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00188">evbuffer_chain::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="buffer__iocp_8c_source.html#l00246">evbuffer_launch_read_()</a>, and <a class="el" href="buffer__iocp_8c_source.html#l00172">evbuffer_launch_write_()</a>.</p>

</div>
</div>
<a id="ac949f855421b4afd676f3293b4d8706e" name="ac949f855421b4afd676f3293b4d8706e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac949f855421b4afd676f3293b4d8706e">&#9670;&nbsp;</a></span>evbuffer_chain_unpin_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_chain_unpin_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> *&#160;</td>
          <td class="paramname"><em>chain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Unpin a single buffer chain using a given flag. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00347">347</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  348</span>{</div>
<div class="line"><span class="lineno">  349</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>((chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> &amp; flag) != 0);</div>
<div class="line"><span class="lineno">  350</span>    chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> &amp;= ~flag;</div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordflow">if</span> (chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> &amp; <a class="code hl_define" href="evbuffer-internal_8h.html#ab79fb1d80416f15da34e29d7acd3da00">EVBUFFER_DANGLING</a>)</div>
<div class="line"><span class="lineno">  352</span>        <a class="code hl_function" href="libevent_2buffer_8c.html#a7acdd31f1b39fc7c74f58103b23b6b0a">evbuffer_chain_free</a>(chain);</div>
<div class="line"><span class="lineno">  353</span>}</div>
<div class="ttc" id="aevbuffer-internal_8h_html_ab79fb1d80416f15da34e29d7acd3da00"><div class="ttname"><a href="evbuffer-internal_8h.html#ab79fb1d80416f15da34e29d7acd3da00">EVBUFFER_DANGLING</a></div><div class="ttdeci">#define EVBUFFER_DANGLING</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00200">evbuffer-internal.h:200</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_a7acdd31f1b39fc7c74f58103b23b6b0a"><div class="ttname"><a href="libevent_2buffer_8c.html#a7acdd31f1b39fc7c74f58103b23b6b0a">evbuffer_chain_free</a></div><div class="ttdeci">static void evbuffer_chain_free(struct evbuffer_chain *chain)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00196">buffer.c:196</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="libevent_2buffer_8c_source.html#l00196">evbuffer_chain_free()</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00200">EVBUFFER_DANGLING</a>, <a class="el" href="util-internal_8h_source.html#l00363">EVUTIL_ASSERT</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00188">evbuffer_chain::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="buffer__iocp_8c_source.html#l00084">pin_release()</a>.</p>

</div>
</div>
<a id="a3ac07b1be4b6fe0b2aa6a1677b060a80" name="a3ac07b1be4b6fe0b2aa6a1677b060a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ac07b1be4b6fe0b2aa6a1677b060a80">&#9670;&nbsp;</a></span>evbuffer_decref_and_unlock_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_decref_and_unlock_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >As evbuffer_free, but requires that we hold a lock on the buffer, and releases the lock before freeing it and the buffer. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00561">561</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  562</span>{</div>
<div class="line"><span class="lineno">  563</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structevbuffer__chain.html">evbuffer_chain</a> *chain, *<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno">  564</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#abfee4993b153dd7fe271db7669e6d647">ASSERT_EVBUFFER_LOCKED</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;refcnt &gt; 0);</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordflow">if</span> (--<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;refcnt &gt; 0) {</div>
<div class="line"><span class="lineno">  569</span>        <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  571</span>    }</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordflow">for</span> (chain = <a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;first; chain != NULL; chain = <a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>) {</div>
<div class="line"><span class="lineno">  574</span>        <a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a> = chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno">  575</span>        <a class="code hl_function" href="libevent_2buffer_8c.html#a7acdd31f1b39fc7c74f58103b23b6b0a">evbuffer_chain_free</a>(chain);</div>
<div class="line"><span class="lineno">  576</span>    }</div>
<div class="line"><span class="lineno">  577</span>    <a class="code hl_function" href="libevent_2buffer_8c.html#a8baa73c3690e47a1e2b5af4e069c3f68">evbuffer_remove_all_callbacks</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred_cbs)</div>
<div class="line"><span class="lineno">  579</span>        <a class="code hl_function" href="defer-internal_8h.html#aae154198179f3170689c8d80ff6dc549">event_deferred_cb_cancel_</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;cb_queue, &amp;<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred);</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;own_lock)</div>
<div class="line"><span class="lineno">  583</span>        <a class="code hl_define" href="evthread-internal_8h.html#a56d74d4600adf793a2411f26db03ca71">EVTHREAD_FREE_LOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;lock, EVTHREAD_LOCKTYPE_RECURSIVE);</div>
<div class="line"><span class="lineno">  584</span>    <a class="code hl_define" href="mm-internal_8h.html#af7d87798652aaa8398bb9c0504256f16">mm_free</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  585</span>}</div>
<div class="ttc" id="adefer-internal_8h_html_aae154198179f3170689c8d80ff6dc549"><div class="ttname"><a href="defer-internal_8h.html#aae154198179f3170689c8d80ff6dc549">event_deferred_cb_cancel_</a></div><div class="ttdeci">EVENT2_EXPORT_SYMBOL void event_deferred_cb_cancel_(struct event_base *, struct event_callback *)</div><div class="ttdef"><b>Definition:</b> <a href="event_8c_source.html#l03115">event.c:3115</a></div></div>
<div class="ttc" id="aevbuffer-internal_8h_html_a7d4b06a7e3d8b4e945cd3234328e39d7"><div class="ttname"><a href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a></div><div class="ttdeci">#define EVBUFFER_UNLOCK(buffer)</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00289">evbuffer-internal.h:289</a></div></div>
<div class="ttc" id="aevbuffer-internal_8h_html_abfee4993b153dd7fe271db7669e6d647"><div class="ttname"><a href="evbuffer-internal_8h.html#abfee4993b153dd7fe271db7669e6d647">ASSERT_EVBUFFER_LOCKED</a></div><div class="ttdeci">#define ASSERT_EVBUFFER_LOCKED(buffer)</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00282">evbuffer-internal.h:282</a></div></div>
<div class="ttc" id="aevthread-internal_8h_html_a56d74d4600adf793a2411f26db03ca71"><div class="ttname"><a href="evthread-internal_8h.html#a56d74d4600adf793a2411f26db03ca71">EVTHREAD_FREE_LOCK</a></div><div class="ttdeci">#define EVTHREAD_FREE_LOCK(lockvar, locktype)</div><div class="ttdef"><b>Definition:</b> <a href="evthread-internal_8h_source.html#l00085">evthread-internal.h:85</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_a8baa73c3690e47a1e2b5af4e069c3f68"><div class="ttname"><a href="libevent_2buffer_8c.html#a8baa73c3690e47a1e2b5af4e069c3f68">evbuffer_remove_all_callbacks</a></div><div class="ttdeci">static void evbuffer_remove_all_callbacks(struct evbuffer *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00550">buffer.c:550</a></div></div>
<div class="ttc" id="amm-internal_8h_html_af7d87798652aaa8398bb9c0504256f16"><div class="ttname"><a href="mm-internal_8h.html#af7d87798652aaa8398bb9c0504256f16">mm_free</a></div><div class="ttdeci">#define mm_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="mm-internal_8h_source.html#l00079">mm-internal.h:79</a></div></div>
<div class="ttc" id="astructevbuffer__chain_html"><div class="ttname"><a href="structevbuffer__chain.html">evbuffer_chain</a></div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00171">evbuffer-internal.h:171</a></div></div>
<div class="ttc" id="astructevbuffer__chain_html_a302eea17a6aacc55c33f119ad788ddb5"><div class="ttname"><a href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">evbuffer_chain::next</a></div><div class="ttdeci">struct evbuffer_chain * next</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00173">evbuffer-internal.h:173</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00282">ASSERT_EVBUFFER_LOCKED</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00196">evbuffer_chain_free()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00550">evbuffer_remove_all_callbacks()</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00289">EVBUFFER_UNLOCK</a>, <a class="el" href="event_8c_source.html#l03115">event_deferred_cb_cancel_()</a>, <a class="el" href="evthread-internal_8h_source.html#l00085">EVTHREAD_FREE_LOCK</a>, <a class="el" href="util-internal_8h_source.html#l00363">EVUTIL_ASSERT</a>, <a class="el" href="mm-internal_8h_source.html#l00079">mm_free</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00173">evbuffer_chain::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="libevent_2buffer_8c_source.html#l00196">evbuffer_chain_free()</a>, <a class="el" href="buffer__iocp_8c_source.html#l00098">evbuffer_commit_read_()</a>, <a class="el" href="buffer__iocp_8c_source.html#l00139">evbuffer_commit_write_()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00534">evbuffer_deferred_callback()</a>, and <a class="el" href="libevent_2buffer_8c_source.html#l00588">evbuffer_free()</a>.</p>

</div>
</div>
<a id="ae3e70f6b044b684d5c4c94e385eba66e" name="ae3e70f6b044b684d5c4c94e385eba66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e70f6b044b684d5c4c94e385eba66e">&#9670;&nbsp;</a></span>evbuffer_expand_fast_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evbuffer_expand_fast_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >As evbuffer_expand, but does not guarantee that the newly allocated memory is contiguous. Instead, it may be split across two or more chunks. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l02051">2051</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2052</span>{</div>
<div class="line"><span class="lineno"> 2053</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structevbuffer__chain.html">evbuffer_chain</a> *chain = buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a>, *tmp, *<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno"> 2054</span>    <span class="keywordtype">size_t</span> avail;</div>
<div class="line"><span class="lineno"> 2055</span>    <span class="keywordtype">int</span> used;</div>
<div class="line"><span class="lineno"> 2056</span> </div>
<div class="line"><span class="lineno"> 2057</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#abfee4993b153dd7fe271db7669e6d647">ASSERT_EVBUFFER_LOCKED</a>(buf);</div>
<div class="line"><span class="lineno"> 2058</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(n &gt;= 2);</div>
<div class="line"><span class="lineno"> 2059</span> </div>
<div class="line"><span class="lineno"> 2060</span>    <span class="keywordflow">if</span> (chain == NULL || (chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a5f5fd17d81d5c58ccb4113857115130f">flags</a> &amp; <a class="code hl_define" href="evbuffer-internal_8h.html#a93af71b521a359f90fce52d1cf9f49c5">EVBUFFER_IMMUTABLE</a>)) {</div>
<div class="line"><span class="lineno"> 2061</span>        <span class="comment">/* There is no last chunk, or we can&#39;t touch the last chunk.</span></div>
<div class="line"><span class="lineno"> 2062</span><span class="comment">         * Just add a new chunk. */</span></div>
<div class="line"><span class="lineno"> 2063</span>        chain = <a class="code hl_function" href="libevent_2buffer_8c.html#ab8a73fb51f7ddbe1641be56eaa45a00f">evbuffer_chain_new</a>(datlen);</div>
<div class="line"><span class="lineno"> 2064</span>        <span class="keywordflow">if</span> (chain == NULL)</div>
<div class="line"><span class="lineno"> 2065</span>            <span class="keywordflow">return</span> (-1);</div>
<div class="line"><span class="lineno"> 2066</span> </div>
<div class="line"><span class="lineno"> 2067</span>        <a class="code hl_function" href="libevent_2buffer_8c.html#abb1ffdb88a9aa9e2b114d98832dfda16">evbuffer_chain_insert</a>(buf, chain);</div>
<div class="line"><span class="lineno"> 2068</span>        <span class="keywordflow">return</span> (0);</div>
<div class="line"><span class="lineno"> 2069</span>    }</div>
<div class="line"><span class="lineno"> 2070</span> </div>
<div class="line"><span class="lineno"> 2071</span>    used = 0; <span class="comment">/* number of chains we&#39;re using space in. */</span></div>
<div class="line"><span class="lineno"> 2072</span>    avail = 0; <span class="comment">/* how much space they have. */</span></div>
<div class="line"><span class="lineno"> 2073</span>    <span class="comment">/* How many bytes can we stick at the end of buffer as it is?  Iterate</span></div>
<div class="line"><span class="lineno"> 2074</span><span class="comment">     * over the chains at the end of the buffer, tring to see how much</span></div>
<div class="line"><span class="lineno"> 2075</span><span class="comment">     * space we have in the first n. */</span></div>
<div class="line"><span class="lineno"> 2076</span>    <span class="keywordflow">for</span> (chain = *buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>; chain; chain = chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>) {</div>
<div class="line"><span class="lineno"> 2077</span>        <span class="keywordflow">if</span> (chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a974dfb5dd49914c64eb413ddac81fc26">off</a>) {</div>
<div class="line"><span class="lineno"> 2078</span>            <span class="keywordtype">size_t</span> space = (size_t) <a class="code hl_define" href="libevent_2buffer_8c.html#a1381150c8f2120296bd2726cf00f3284">CHAIN_SPACE_LEN</a>(chain);</div>
<div class="line"><span class="lineno"> 2079</span>            <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(chain == *buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>);</div>
<div class="line"><span class="lineno"> 2080</span>            <span class="keywordflow">if</span> (space) {</div>
<div class="line"><span class="lineno"> 2081</span>                avail += space;</div>
<div class="line"><span class="lineno"> 2082</span>                ++used;</div>
<div class="line"><span class="lineno"> 2083</span>            }</div>
<div class="line"><span class="lineno"> 2084</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2085</span>            <span class="comment">/* No data in chain; realign it. */</span></div>
<div class="line"><span class="lineno"> 2086</span>            chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a4a11d168256c989272d4d2ecea5b16f3">misalign</a> = 0;</div>
<div class="line"><span class="lineno"> 2087</span>            avail += chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a584b2b319d71fad5848c5f3a1a971c11">buffer_len</a>;</div>
<div class="line"><span class="lineno"> 2088</span>            ++used;</div>
<div class="line"><span class="lineno"> 2089</span>        }</div>
<div class="line"><span class="lineno"> 2090</span>        <span class="keywordflow">if</span> (avail &gt;= datlen) {</div>
<div class="line"><span class="lineno"> 2091</span>            <span class="comment">/* There is already enough space.  Just return */</span></div>
<div class="line"><span class="lineno"> 2092</span>            <span class="keywordflow">return</span> (0);</div>
<div class="line"><span class="lineno"> 2093</span>        }</div>
<div class="line"><span class="lineno"> 2094</span>        <span class="keywordflow">if</span> (used == n)</div>
<div class="line"><span class="lineno"> 2095</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2096</span>    }</div>
<div class="line"><span class="lineno"> 2097</span> </div>
<div class="line"><span class="lineno"> 2098</span>    <span class="comment">/* There wasn&#39;t enough space in the first n chains with space in</span></div>
<div class="line"><span class="lineno"> 2099</span><span class="comment">     * them. Either add a new chain with enough space, or replace all</span></div>
<div class="line"><span class="lineno"> 2100</span><span class="comment">     * empty chains with one that has enough space, depending on n. */</span></div>
<div class="line"><span class="lineno"> 2101</span>    <span class="keywordflow">if</span> (used &lt; n) {</div>
<div class="line"><span class="lineno"> 2102</span>        <span class="comment">/* The loop ran off the end of the chains before it hit n</span></div>
<div class="line"><span class="lineno"> 2103</span><span class="comment">         * chains; we can add another. */</span></div>
<div class="line"><span class="lineno"> 2104</span>        <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(chain == NULL);</div>
<div class="line"><span class="lineno"> 2105</span> </div>
<div class="line"><span class="lineno"> 2106</span>        tmp = <a class="code hl_function" href="libevent_2buffer_8c.html#ab8a73fb51f7ddbe1641be56eaa45a00f">evbuffer_chain_new</a>(datlen - avail);</div>
<div class="line"><span class="lineno"> 2107</span>        <span class="keywordflow">if</span> (tmp == NULL)</div>
<div class="line"><span class="lineno"> 2108</span>            <span class="keywordflow">return</span> (-1);</div>
<div class="line"><span class="lineno"> 2109</span> </div>
<div class="line"><span class="lineno"> 2110</span>        buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a>-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a> = tmp;</div>
<div class="line"><span class="lineno"> 2111</span>        buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a> = tmp;</div>
<div class="line"><span class="lineno"> 2112</span>        <span class="comment">/* (we would only set last_with_data if we added the first</span></div>
<div class="line"><span class="lineno"> 2113</span><span class="comment">         * chain. But if the buffer had no chains, we would have</span></div>
<div class="line"><span class="lineno"> 2114</span><span class="comment">         * just allocated a new chain earlier) */</span></div>
<div class="line"><span class="lineno"> 2115</span>        <span class="keywordflow">return</span> (0);</div>
<div class="line"><span class="lineno"> 2116</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2117</span>        <span class="comment">/* Nuke _all_ the empty chains. */</span></div>
<div class="line"><span class="lineno"> 2118</span>        <span class="keywordtype">int</span> rmv_all = 0; <span class="comment">/* True iff we removed last_with_data. */</span></div>
<div class="line"><span class="lineno"> 2119</span>        chain = *buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>;</div>
<div class="line"><span class="lineno"> 2120</span>        <span class="keywordflow">if</span> (!chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a974dfb5dd49914c64eb413ddac81fc26">off</a>) {</div>
<div class="line"><span class="lineno"> 2121</span>            <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(chain == buf-&gt;<a class="code hl_variable" href="structevbuffer.html#a590cd5dc76dfecc57b45262d65fa1106">first</a>);</div>
<div class="line"><span class="lineno"> 2122</span>            rmv_all = 1;</div>
<div class="line"><span class="lineno"> 2123</span>            avail = 0;</div>
<div class="line"><span class="lineno"> 2124</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2125</span>            <span class="comment">/* can&#39;t overflow, since only mutable chains have</span></div>
<div class="line"><span class="lineno"> 2126</span><span class="comment">             * huge misaligns. */</span></div>
<div class="line"><span class="lineno"> 2127</span>            avail = (size_t) <a class="code hl_define" href="libevent_2buffer_8c.html#a1381150c8f2120296bd2726cf00f3284">CHAIN_SPACE_LEN</a>(chain);</div>
<div class="line"><span class="lineno"> 2128</span>            chain = chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno"> 2129</span>        }</div>
<div class="line"><span class="lineno"> 2130</span> </div>
<div class="line"><span class="lineno"> 2131</span> </div>
<div class="line"><span class="lineno"> 2132</span>        <span class="keywordflow">for</span> (; chain; chain = <a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>) {</div>
<div class="line"><span class="lineno"> 2133</span>            <a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a> = chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno"> 2134</span>            <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a974dfb5dd49914c64eb413ddac81fc26">off</a> == 0);</div>
<div class="line"><span class="lineno"> 2135</span>            <a class="code hl_function" href="libevent_2buffer_8c.html#a7acdd31f1b39fc7c74f58103b23b6b0a">evbuffer_chain_free</a>(chain);</div>
<div class="line"><span class="lineno"> 2136</span>        }</div>
<div class="line"><span class="lineno"> 2137</span>        <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(datlen &gt;= avail);</div>
<div class="line"><span class="lineno"> 2138</span>        tmp = <a class="code hl_function" href="libevent_2buffer_8c.html#ab8a73fb51f7ddbe1641be56eaa45a00f">evbuffer_chain_new</a>(datlen - avail);</div>
<div class="line"><span class="lineno"> 2139</span>        <span class="keywordflow">if</span> (tmp == NULL) {</div>
<div class="line"><span class="lineno"> 2140</span>            <span class="keywordflow">if</span> (rmv_all) {</div>
<div class="line"><span class="lineno"> 2141</span>                <a class="code hl_function" href="libevent_2buffer_8c.html#a11161d984ed671f309bb410de5acff51">ZERO_CHAIN</a>(buf);</div>
<div class="line"><span class="lineno"> 2142</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2143</span>                buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a> = *buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>;</div>
<div class="line"><span class="lineno"> 2144</span>                (*buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>)-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a> = NULL;</div>
<div class="line"><span class="lineno"> 2145</span>            }</div>
<div class="line"><span class="lineno"> 2146</span>            <span class="keywordflow">return</span> (-1);</div>
<div class="line"><span class="lineno"> 2147</span>        }</div>
<div class="line"><span class="lineno"> 2148</span> </div>
<div class="line"><span class="lineno"> 2149</span>        <span class="keywordflow">if</span> (rmv_all) {</div>
<div class="line"><span class="lineno"> 2150</span>            buf-&gt;<a class="code hl_variable" href="structevbuffer.html#a590cd5dc76dfecc57b45262d65fa1106">first</a> = buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a> = tmp;</div>
<div class="line"><span class="lineno"> 2151</span>            buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a> = &amp;buf-&gt;<a class="code hl_variable" href="structevbuffer.html#a590cd5dc76dfecc57b45262d65fa1106">first</a>;</div>
<div class="line"><span class="lineno"> 2152</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2153</span>            (*buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>)-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a> = tmp;</div>
<div class="line"><span class="lineno"> 2154</span>            buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">last</a> = tmp;</div>
<div class="line"><span class="lineno"> 2155</span>        }</div>
<div class="line"><span class="lineno"> 2156</span>        <span class="keywordflow">return</span> (0);</div>
<div class="line"><span class="lineno"> 2157</span>    }</div>
<div class="line"><span class="lineno"> 2158</span>}</div>
<div class="ttc" id="aevbuffer-internal_8h_html_a93af71b521a359f90fce52d1cf9f49c5"><div class="ttname"><a href="evbuffer-internal_8h.html#a93af71b521a359f90fce52d1cf9f49c5">EVBUFFER_IMMUTABLE</a></div><div class="ttdeci">#define EVBUFFER_IMMUTABLE</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00192">evbuffer-internal.h:192</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_a11161d984ed671f309bb410de5acff51"><div class="ttname"><a href="libevent_2buffer_8c.html#a11161d984ed671f309bb410de5acff51">ZERO_CHAIN</a></div><div class="ttdeci">static void ZERO_CHAIN(struct evbuffer *dst)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00800">buffer.c:800</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_a1381150c8f2120296bd2726cf00f3284"><div class="ttname"><a href="libevent_2buffer_8c.html#a1381150c8f2120296bd2726cf00f3284">CHAIN_SPACE_LEN</a></div><div class="ttdeci">#define CHAIN_SPACE_LEN(ch)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00130">buffer.c:130</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_ab8a73fb51f7ddbe1641be56eaa45a00f"><div class="ttname"><a href="libevent_2buffer_8c.html#ab8a73fb51f7ddbe1641be56eaa45a00f">evbuffer_chain_new</a></div><div class="ttdeci">static struct evbuffer_chain * evbuffer_chain_new(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00157">buffer.c:157</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_abb1ffdb88a9aa9e2b114d98832dfda16"><div class="ttname"><a href="libevent_2buffer_8c.html#abb1ffdb88a9aa9e2b114d98832dfda16">evbuffer_chain_insert</a></div><div class="ttdeci">static void evbuffer_chain_insert(struct evbuffer *buf, struct evbuffer_chain *chain)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00309">buffer.c:309</a></div></div>
<div class="ttc" id="astructevbuffer__chain_html_a4a11d168256c989272d4d2ecea5b16f3"><div class="ttname"><a href="structevbuffer__chain.html#a4a11d168256c989272d4d2ecea5b16f3">evbuffer_chain::misalign</a></div><div class="ttdeci">ev_misalign_t misalign</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00180">evbuffer-internal.h:180</a></div></div>
<div class="ttc" id="astructevbuffer__chain_html_a584b2b319d71fad5848c5f3a1a971c11"><div class="ttname"><a href="structevbuffer__chain.html#a584b2b319d71fad5848c5f3a1a971c11">evbuffer_chain::buffer_len</a></div><div class="ttdeci">size_t buffer_len</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00176">evbuffer-internal.h:176</a></div></div>
<div class="ttc" id="astructevbuffer__chain_html_a974dfb5dd49914c64eb413ddac81fc26"><div class="ttname"><a href="structevbuffer__chain.html#a974dfb5dd49914c64eb413ddac81fc26">evbuffer_chain::off</a></div><div class="ttdeci">size_t off</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00185">evbuffer-internal.h:185</a></div></div>
<div class="ttc" id="astructevbuffer_html_a590cd5dc76dfecc57b45262d65fa1106"><div class="ttname"><a href="structevbuffer.html#a590cd5dc76dfecc57b45262d65fa1106">evbuffer::first</a></div><div class="ttdeci">struct evbuffer_chain * first</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00082">evbuffer-internal.h:82</a></div></div>
<div class="ttc" id="astructevbuffer_html_aa89b72c7086750d7b6c91902e2f1bf21"><div class="ttname"><a href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">evbuffer::last_with_datap</a></div><div class="ttdeci">struct evbuffer_chain ** last_with_datap</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00099">evbuffer-internal.h:99</a></div></div>
<div class="ttc" id="astructevbuffer_html_aada4ae960b5f60ac937cd8488dafc849"><div class="ttname"><a href="structevbuffer.html#aada4ae960b5f60ac937cd8488dafc849">evbuffer::last</a></div><div class="ttdeci">struct evbuffer_chain * last</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00084">evbuffer-internal.h:84</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00282">ASSERT_EVBUFFER_LOCKED</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00176">evbuffer_chain::buffer_len</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00130">CHAIN_SPACE_LEN</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00196">evbuffer_chain_free()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00309">evbuffer_chain_insert()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00157">evbuffer_chain_new()</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00192">EVBUFFER_IMMUTABLE</a>, <a class="el" href="util-internal_8h_source.html#l00363">EVUTIL_ASSERT</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00082">evbuffer::first</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00188">evbuffer_chain::flags</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00084">evbuffer::last</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00099">evbuffer::last_with_datap</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00180">evbuffer_chain::misalign</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00173">evbuffer_chain::next</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00185">evbuffer_chain::off</a>, and <a class="el" href="libevent_2buffer_8c_source.html#l00800">ZERO_CHAIN()</a>.</p>

<p class="reference">Referenced by <a class="el" href="libevent_2buffer_8c_source.html#l00635">evbuffer_add_iovec()</a>, <a class="el" href="buffer__iocp_8c_source.html#l00246">evbuffer_launch_read_()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l02284">evbuffer_read()</a>, and <a class="el" href="libevent_2buffer_8c_source.html#l00671">evbuffer_reserve_space()</a>.</p>

</div>
</div>
<a id="a44fba9707bdfca27ce64ab9b3af5bbf8" name="a44fba9707bdfca27ce64ab9b3af5bbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fba9707bdfca27ce64ab9b3af5bbf8">&#9670;&nbsp;</a></span>evbuffer_get_callbacks_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evbuffer_get_callbacks_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct event_callback **&#160;</td>
          <td class="paramname"><em>cbs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_cbs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l03451">3451</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3453</span>{</div>
<div class="line"><span class="lineno"> 3454</span>    <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><span class="lineno"> 3455</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno"> 3456</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred_cbs) {</div>
<div class="line"><span class="lineno"> 3457</span>        <span class="keywordflow">if</span> (max_cbs &lt; 1) {</div>
<div class="line"><span class="lineno"> 3458</span>            r = -1;</div>
<div class="line"><span class="lineno"> 3459</span>            <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 3460</span>        }</div>
<div class="line"><span class="lineno"> 3461</span>        cbs[0] = &amp;<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred;</div>
<div class="line"><span class="lineno"> 3462</span>        r = 1;</div>
<div class="line"><span class="lineno"> 3463</span>    }</div>
<div class="line"><span class="lineno"> 3464</span>done:</div>
<div class="line"><span class="lineno"> 3465</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno"> 3466</span>    <span class="keywordflow">return</span> r;</div>
<div class="line"><span class="lineno"> 3467</span>}</div>
<div class="ttc" id="aevbuffer-internal_8h_html_a2db7168a100510b09c26d9d9896991e0"><div class="ttname"><a href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a></div><div class="ttdeci">#define EVBUFFER_LOCK(buffer)</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00285">evbuffer-internal.h:285</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00285">EVBUFFER_LOCK</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00289">EVBUFFER_UNLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufferevent_8c_source.html#l00706">bufferevent_decref_and_unlock_()</a>.</p>

</div>
</div>
<a id="a28d71fa071cae93e6b7a64314283e921" name="a28d71fa071cae93e6b7a64314283e921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d71fa071cae93e6b7a64314283e921">&#9670;&nbsp;</a></span>evbuffer_incref_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_incref_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Increase the reference count of buf by one. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00396">396</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  397</span>{</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a>(buf);</div>
<div class="line"><span class="lineno">  399</span>    ++buf-&gt;<a class="code hl_variable" href="structevbuffer.html#a84f258913691bdcc10456cfe78fe9440">refcnt</a>;</div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(buf);</div>
<div class="line"><span class="lineno">  401</span>}</div>
<div class="ttc" id="astructevbuffer_html_a84f258913691bdcc10456cfe78fe9440"><div class="ttname"><a href="structevbuffer.html#a84f258913691bdcc10456cfe78fe9440">evbuffer::refcnt</a></div><div class="ttdeci">int refcnt</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00144">evbuffer-internal.h:144</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00285">EVBUFFER_LOCK</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00289">EVBUFFER_UNLOCK</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00144">evbuffer::refcnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="libevent_2buffer_8c_source.html#l00908">APPEND_CHAIN_MULTICAST()</a>, <a class="el" href="buffer__iocp_8c_source.html#l00246">evbuffer_launch_read_()</a>, and <a class="el" href="buffer__iocp_8c_source.html#l00172">evbuffer_launch_write_()</a>.</p>

</div>
</div>
<a id="ae58a14e3a6a2bc7e1ffc02b71d78daec" name="ae58a14e3a6a2bc7e1ffc02b71d78daec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae58a14e3a6a2bc7e1ffc02b71d78daec">&#9670;&nbsp;</a></span>evbuffer_incref_and_lock_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_incref_and_lock_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Increase the reference count of buf by one and acquire the lock. </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00404">404</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  405</span>{</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a>(buf);</div>
<div class="line"><span class="lineno">  407</span>    ++buf-&gt;<a class="code hl_variable" href="structevbuffer.html#a84f258913691bdcc10456cfe78fe9440">refcnt</a>;</div>
<div class="line"><span class="lineno">  408</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00285">EVBUFFER_LOCK</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00144">evbuffer::refcnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="libevent_2buffer_8c_source.html#l00514">evbuffer_invoke_callbacks_()</a>.</p>

</div>
</div>
<a id="a576702a87079ef74c75413ed83758825" name="a576702a87079ef74c75413ed83758825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576702a87079ef74c75413ed83758825">&#9670;&nbsp;</a></span>evbuffer_invoke_callbacks_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_invoke_callbacks_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00514">514</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  515</span>{</div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">if</span> (LIST_EMPTY(&amp;<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;callbacks)) {</div>
<div class="line"><span class="lineno">  517</span>        <a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;n_add_for_cb = <a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;n_del_for_cb = 0;</div>
<div class="line"><span class="lineno">  518</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  519</span>    }</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred_cbs) {</div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="defer-internal_8h.html#a24707370a90c5bb18a23743420290ef1">event_deferred_cb_schedule_</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;cb_queue, &amp;<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;deferred)) {</div>
<div class="line"><span class="lineno">  523</span>            <a class="code hl_function" href="libevent_2buffer_8c.html#ae58a14e3a6a2bc7e1ffc02b71d78daec">evbuffer_incref_and_lock_</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  524</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;parent)</div>
<div class="line"><span class="lineno">  525</span>                <a class="code hl_define" href="bufferevent-internal_8h.html#afcc12755372ba0aad29f5618cf7e60e9">bufferevent_incref_</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>-&gt;parent);</div>
<div class="line"><span class="lineno">  526</span>            <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>);</div>
<div class="line"><span class="lineno">  527</span>        }</div>
<div class="line"><span class="lineno">  528</span>    }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    <a class="code hl_function" href="libevent_2buffer_8c.html#a9498833b7740ef5ea694a18ad9bf4c07">evbuffer_run_callbacks</a>(<a class="code hl_struct" href="structbuffer.html">buffer</a>, 0);</div>
<div class="line"><span class="lineno">  531</span>}</div>
<div class="ttc" id="abufferevent-internal_8h_html_afcc12755372ba0aad29f5618cf7e60e9"><div class="ttname"><a href="bufferevent-internal_8h.html#afcc12755372ba0aad29f5618cf7e60e9">bufferevent_incref_</a></div><div class="ttdeci">#define bufferevent_incref_(bufev)</div><div class="ttdef"><b>Definition:</b> <a href="bufferevent-internal_8h_source.html#l00369">bufferevent-internal.h:369</a></div></div>
<div class="ttc" id="adefer-internal_8h_html_a24707370a90c5bb18a23743420290ef1"><div class="ttname"><a href="defer-internal_8h.html#a24707370a90c5bb18a23743420290ef1">event_deferred_cb_schedule_</a></div><div class="ttdeci">EVENT2_EXPORT_SYMBOL int event_deferred_cb_schedule_(struct event_base *, struct event_callback *)</div><div class="ttdef"><b>Definition:</b> <a href="event_8c_source.html#l03124">event.c:3124</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_a9498833b7740ef5ea694a18ad9bf4c07"><div class="ttname"><a href="libevent_2buffer_8c.html#a9498833b7740ef5ea694a18ad9bf4c07">evbuffer_run_callbacks</a></div><div class="ttdeci">static void evbuffer_run_callbacks(struct evbuffer *buffer, int running_deferred)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00456">buffer.c:456</a></div></div>
<div class="ttc" id="alibevent_2buffer_8c_html_ae58a14e3a6a2bc7e1ffc02b71d78daec"><div class="ttname"><a href="libevent_2buffer_8c.html#ae58a14e3a6a2bc7e1ffc02b71d78daec">evbuffer_incref_and_lock_</a></div><div class="ttdeci">void evbuffer_incref_and_lock_(struct evbuffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00404">buffer.c:404</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufferevent-internal_8h_source.html#l00369">bufferevent_incref_</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00404">evbuffer_incref_and_lock_()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00456">evbuffer_run_callbacks()</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00289">EVBUFFER_UNLOCK</a>, and <a class="el" href="event_8c_source.html#l03124">event_deferred_cb_schedule_()</a>.</p>

<p class="reference">Referenced by <a class="el" href="libevent_2buffer_8c_source.html#l01730">evbuffer_add()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00966">evbuffer_add_buffer()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l01012">evbuffer_add_buffer_reference()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l03194">evbuffer_add_file_segment()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l02921">evbuffer_add_reference()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l02844">evbuffer_add_vprintf()</a>, <a class="el" href="buffer__iocp_8c_source.html#l00098">evbuffer_commit_read_()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00724">evbuffer_commit_space()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l01101">evbuffer_drain()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l01827">evbuffer_prepend()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l01055">evbuffer_prepend_buffer()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l02284">evbuffer_read()</a>, and <a class="el" href="libevent_2buffer_8c_source.html#l01260">evbuffer_remove_buffer()</a>.</p>

</div>
</div>
<a id="a664f1383f1d7d02842880672be9f6f80" name="a664f1383f1d7d02842880672be9f6f80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a664f1383f1d7d02842880672be9f6f80">&#9670;&nbsp;</a></span>evbuffer_read_setup_vecs_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evbuffer_read_setup_vecs_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ev_ssize_t&#160;</td>
          <td class="paramname"><em>howmuch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct evbuffer_iovec *&#160;</td>
          <td class="paramname"><em>vecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_vecs_avail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structevbuffer__chain.html">evbuffer_chain</a> ***&#160;</td>
          <td class="paramname"><em>chainp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exact</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Helper: prepares for a readv/WSARecv call by expanding the buffer to hold enough memory to read 'howmuch' bytes in possibly noncontiguous memory. Sets up the one or two iovecs in 'vecs' to point to the free memory and its extent, and *chainp to point to the first chain that we'll try to read into. Returns the number of vecs used.</p>
<p >Helper function to figure out which space to use for reading data into an evbuffer. Internal use only.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer to read into </td></tr>
    <tr><td class="paramname">howmuch</td><td>How much we want to read. </td></tr>
    <tr><td class="paramname">vecs</td><td>An array of two or more iovecs or WSABUFs. </td></tr>
    <tr><td class="paramname">n_vecs_avail</td><td>The length of vecs </td></tr>
    <tr><td class="paramname">chainp</td><td>A pointer to a variable to hold the first chain we're reading into. </td></tr>
    <tr><td class="paramname">exact</td><td>Boolean: if true, we do not provide more than 'howmuch' space in the vectors, even if more space is available. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of buffers we're using. </dd></dl>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l02225">2225</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2228</span>{</div>
<div class="line"><span class="lineno"> 2229</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structevbuffer__chain.html">evbuffer_chain</a> *chain;</div>
<div class="line"><span class="lineno"> 2230</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structevbuffer__chain.html">evbuffer_chain</a> **firstchainp;</div>
<div class="line"><span class="lineno"> 2231</span>    <span class="keywordtype">size_t</span> so_far;</div>
<div class="line"><span class="lineno"> 2232</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 2233</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#abfee4993b153dd7fe271db7669e6d647">ASSERT_EVBUFFER_LOCKED</a>(buf);</div>
<div class="line"><span class="lineno"> 2234</span> </div>
<div class="line"><span class="lineno"> 2235</span>    <span class="keywordflow">if</span> (howmuch &lt; 0)</div>
<div class="line"><span class="lineno"> 2236</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 2237</span> </div>
<div class="line"><span class="lineno"> 2238</span>    so_far = 0;</div>
<div class="line"><span class="lineno"> 2239</span>    <span class="comment">/* Let firstchain be the first chain with any space on it */</span></div>
<div class="line"><span class="lineno"> 2240</span>    firstchainp = buf-&gt;<a class="code hl_variable" href="structevbuffer.html#aa89b72c7086750d7b6c91902e2f1bf21">last_with_datap</a>;</div>
<div class="line"><span class="lineno"> 2241</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(*firstchainp);</div>
<div class="line"><span class="lineno"> 2242</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="libevent_2buffer_8c.html#a1381150c8f2120296bd2726cf00f3284">CHAIN_SPACE_LEN</a>(*firstchainp) == 0) {</div>
<div class="line"><span class="lineno"> 2243</span>        firstchainp = &amp;(*firstchainp)-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno"> 2244</span>    }</div>
<div class="line"><span class="lineno"> 2245</span> </div>
<div class="line"><span class="lineno"> 2246</span>    chain = *firstchainp;</div>
<div class="line"><span class="lineno"> 2247</span>    <a class="code hl_define" href="util-internal_8h.html#a7365930d8b30f4c1ab3cef31a8622731">EVUTIL_ASSERT</a>(chain);</div>
<div class="line"><span class="lineno"> 2248</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n_vecs_avail &amp;&amp; so_far &lt; (size_t)howmuch; ++i) {</div>
<div class="line"><span class="lineno"> 2249</span>        <span class="keywordtype">size_t</span> avail = (size_t) <a class="code hl_define" href="libevent_2buffer_8c.html#a1381150c8f2120296bd2726cf00f3284">CHAIN_SPACE_LEN</a>(chain);</div>
<div class="line"><span class="lineno"> 2250</span>        <span class="keywordflow">if</span> (avail &gt; (howmuch - so_far) &amp;&amp; exact)</div>
<div class="line"><span class="lineno"> 2251</span>            avail = howmuch - so_far;</div>
<div class="line"><span class="lineno"> 2252</span>        vecs[i].iov_base = (<span class="keywordtype">void</span> *)<a class="code hl_define" href="libevent_2buffer_8c.html#a17846db51ec6b10c559ec8af1b30e379">CHAIN_SPACE_PTR</a>(chain);</div>
<div class="line"><span class="lineno"> 2253</span>        vecs[i].iov_len = avail;</div>
<div class="line"><span class="lineno"> 2254</span>        so_far += avail;</div>
<div class="line"><span class="lineno"> 2255</span>        chain = chain-&gt;<a class="code hl_variable" href="structevbuffer__chain.html#a302eea17a6aacc55c33f119ad788ddb5">next</a>;</div>
<div class="line"><span class="lineno"> 2256</span>    }</div>
<div class="line"><span class="lineno"> 2257</span> </div>
<div class="line"><span class="lineno"> 2258</span>    *chainp = firstchainp;</div>
<div class="line"><span class="lineno"> 2259</span>    <span class="keywordflow">return</span> i;</div>
<div class="line"><span class="lineno"> 2260</span>}</div>
<div class="ttc" id="alibevent_2buffer_8c_html_a17846db51ec6b10c559ec8af1b30e379"><div class="ttname"><a href="libevent_2buffer_8c.html#a17846db51ec6b10c559ec8af1b30e379">CHAIN_SPACE_PTR</a></div><div class="ttdeci">#define CHAIN_SPACE_PTR(ch)</div><div class="ttdef"><b>Definition:</b> <a href="libevent_2buffer_8c_source.html#l00129">buffer.c:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00282">ASSERT_EVBUFFER_LOCKED</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00130">CHAIN_SPACE_LEN</a>, <a class="el" href="libevent_2buffer_8c_source.html#l00129">CHAIN_SPACE_PTR</a>, <a class="el" href="util-internal_8h_source.html#l00363">EVUTIL_ASSERT</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00099">evbuffer::last_with_datap</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00173">evbuffer_chain::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="buffer__iocp_8c_source.html#l00246">evbuffer_launch_read_()</a>, <a class="el" href="libevent_2buffer_8c_source.html#l02284">evbuffer_read()</a>, and <a class="el" href="libevent_2buffer_8c_source.html#l00671">evbuffer_reserve_space()</a>.</p>

</div>
</div>
<a id="a2dbc008d184dacd1d3d97ed9fabad435" name="a2dbc008d184dacd1d3d97ed9fabad435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dbc008d184dacd1d3d97ed9fabad435">&#9670;&nbsp;</a></span>evbuffer_set_parent_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_set_parent_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bufferevent *&#160;</td>
          <td class="paramname"><em>bev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set the parent bufferevent object for buf to bev </p>

<p class="definition">Definition at line <a class="el" href="libevent_2buffer_8c_source.html#l00448">448</a> of file <a class="el" href="libevent_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  449</span>{</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a2db7168a100510b09c26d9d9896991e0">EVBUFFER_LOCK</a>(buf);</div>
<div class="line"><span class="lineno">  451</span>    buf-&gt;<a class="code hl_variable" href="structevbuffer.html#acc2fc2823057650c10b7133a8282d153">parent</a> = bev;</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_define" href="evbuffer-internal_8h.html#a7d4b06a7e3d8b4e945cd3234328e39d7">EVBUFFER_UNLOCK</a>(buf);</div>
<div class="line"><span class="lineno">  453</span>}</div>
<div class="ttc" id="astructevbuffer_html_acc2fc2823057650c10b7133a8282d153"><div class="ttname"><a href="structevbuffer.html#acc2fc2823057650c10b7133a8282d153">evbuffer::parent</a></div><div class="ttdeci">struct bufferevent * parent</div><div class="ttdef"><b>Definition:</b> <a href="evbuffer-internal_8h_source.html#l00155">evbuffer-internal.h:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="evbuffer-internal_8h_source.html#l00285">EVBUFFER_LOCK</a>, <a class="el" href="evbuffer-internal_8h_source.html#l00289">EVBUFFER_UNLOCK</a>, and <a class="el" href="evbuffer-internal_8h_source.html#l00155">evbuffer::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufferevent_8c_source.html#l00309">bufferevent_init_common_()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
